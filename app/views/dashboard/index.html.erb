<% if current_student %>
  <%= @student.email %>'s dashboard
  <%= link_to "My profile", student_profile_path(:id => @student.id) %>
  <% if @student.has_a_teacher %>
    Current teacher:
    <% @student.current_teachers.each do |relationship| %>
      <%= @teachers.find(relationship.teacher_id).teacher_profile.name %>
    <% end %>
    Materials:
    <% @student.materials.each do |material| %>
      <%= material.find_by(student_id: current_student.id).link %>
      <%= material.date %>
    <% end %>
  <% elsif @student.has_pending_teacher_requests %>
    Pending requests:
    <% @student.pending_teacher_requests.each do |relationship| %>
      <%= @teachers.find(relationship.teacher_id).teacher_profile.name %>
    <% end %>
  <% end %>

<% elsif current_teacher %>
  <%= @teacher.email %>'s dashboard
  <%= link_to "My profile", teacher_profile_path(:id => @teacher.id) %>
  <% @teacher.relationships.each do |relationship| %>
    <br>
    <br>
    <% if relationship.request_status == true %>
      Current students:
      <%= @students.find(relationship.student_id).student_profile.name %>
      <%= link_to 'Add class', {controller: "materials", action: "new", student_id: relationship.student_id} %>
      Materials:
      <%= @teacher.materials.each do |material| %>
      <%= material.date %>
      <%= material.link %>
      <% end %>
    <% else %>
      Pending requests:
      <br>
      <%= @students.find(relationship.student_id).student_profile.name  %>
      <br>
      Native language: <%= @students.find(relationship.student_id).student_profile.native_language %>
      <br>
      Learning objectives: <%= @students.find(relationship.student_id).student_profile.learning_objectives %>
        <%= link_to "Confirm", relationship_path(relationship.id), method: :put %>
        <%= link_to "Decline", relationship_path(relationship.id), method: :delete %>
    <% end %>
  <% end %>
<% end %>
